{
  "openapi": "3.0.0",
  "paths": {
    "/api/v1/auth/login": {
      "post": {
        "description": "Đăng nhập tài khoản người dùng",
        "operationId": "AuthController_login_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseAuthDto"
                }
              }
            }
          }
        },
        "summary": "Login user",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "description": "Đăng ký tài khoản mới",
        "operationId": "AuthController_register_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Đăng ký thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseAuthDto"
                }
              }
            }
          }
        },
        "summary": "Register user",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "description": "Cấp lại access token từ refresh token",
        "operationId": "AuthController_refreshToken_v1",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Refresh token thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseAuthDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Refresh token",
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/v1/user/new-password": {
      "post": {
        "operationId": "UserController_updateNewPassword_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "newPassword": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tạo mật khẩu mới thành công"
          }
        },
        "summary": "Tạo mật khẩu mới",
        "tags": [
          "User"
        ]
      }
    },
    "/api/v1/user/change-password": {
      "post": {
        "operationId": "UserController_changePassword_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "description": "Email của người dùng"
                  },
                  "oldPassword": {
                    "type": "string",
                    "description": "Mật khẩu cũ"
                  },
                  "newPassword": {
                    "type": "string",
                    "description": "Mật khẩu mới"
                  }
                },
                "required": [
                  "email",
                  "oldPassword",
                  "newPassword"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Đổi mật khẩu thành công"
          },
          "401": {
            "description": "Mật khẩu cũ không đúng"
          },
          "404": {
            "description": "Không tìm thấy người dùng"
          }
        },
        "summary": "Đổi mật khẩu",
        "tags": [
          "User"
        ]
      }
    },
    "/api/v1/user/profile": {
      "get": {
        "operationId": "UserController_getCurrentUserProfile_v1",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Lấy thông tin profile thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseProfileDto"
                }
              }
            }
          }
        },
        "summary": "Lấy thông tin profile của người dùng hiện tại",
        "tags": [
          "User"
        ]
      },
      "put": {
        "operationId": "UserController_updateCurrentUserProfile_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật profile thành công"
          }
        },
        "summary": "Cập nhật thông tin profile của người dùng hiện tại",
        "tags": [
          "User"
        ]
      }
    },
    "/api/v1/user/{userId}/profile": {
      "get": {
        "operationId": "UserController_getUserProfile_v1",
        "parameters": [
          {
            "name": "userId",
            "required": true,
            "in": "path",
            "description": "ID của người dùng",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lấy thông tin profile thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseProfileDto"
                }
              }
            }
          }
        },
        "summary": "Lấy thông tin profile của người dùng theo ID",
        "tags": [
          "User"
        ]
      }
    },
    "/api/v1/user/avatar-image": {
      "post": {
        "operationId": "UserController_uploadAvatarImage_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Avatar image upload",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Upload avatar image successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "success": true,
                    "data": {
                      "asset_id": "some-asset-id",
                      "public_id": "some-public-id",
                      "url": "https://res.cloudinary.com/..."
                    },
                    "message": "Tải lên tệp tin thành công"
                  }
                }
              }
            }
          }
        },
        "summary": "Upload avatar image for current user",
        "tags": [
          "User"
        ]
      }
    },
    "/api/v1/user/cover-image": {
      "post": {
        "operationId": "UserController_uploadCoverImage_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Cover image upload",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Upload cover image successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "success": true,
                    "data": {
                      "asset_id": "some-asset-id",
                      "public_id": "some-public-id",
                      "url": "https://res.cloudinary.com/..."
                    },
                    "message": "Tải lên tệp tin thành công"
                  }
                }
              }
            }
          }
        },
        "summary": "Upload cover image for current user",
        "tags": [
          "User"
        ]
      }
    },
    "/api/v1/user/all-sport": {
      "get": {
        "operationId": "UserController_getSports_v1",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Danh sách tất cả các môn thể thao",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "enum": [
                      "football",
                      "basketball",
                      "tennis",
                      "badminton",
                      "volleyball",
                      "table_tennis",
                      "swimming",
                      "running",
                      "cycling",
                      "yoga",
                      "gym",
                      "martial_arts",
                      "boxing",
                      "golf",
                      "rock_climbing"
                    ]
                  }
                }
              }
            }
          }
        },
        "summary": "Lấy danh sách tất cả các môn thể thao",
        "tags": [
          "User"
        ]
      }
    },
    "/api/v1/user/skills": {
      "put": {
        "operationId": "UserController_updateSkillLevels_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Skill levels",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "skillLevels": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "string",
                      "enum": [
                        "beginner",
                        "intermediate",
                        "advanced",
                        "professional"
                      ]
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cập nhật skill levels thành công"
          }
        },
        "summary": "Cập nhật trình độ kỹ năng cho từng môn thể thao",
        "tags": [
          "User"
        ]
      }
    },
    "/api/v1/user/favorite-sport/{sportType}": {
      "delete": {
        "operationId": "UserController_removeFavoriteSport_v1",
        "parameters": [
          {
            "name": "sportType",
            "required": true,
            "in": "path",
            "description": "Tên môn thể thao cần xóa",
            "schema": {
              "enum": [
                "football",
                "basketball",
                "tennis",
                "badminton",
                "volleyball",
                "table_tennis",
                "swimming",
                "running",
                "cycling",
                "yoga",
                "gym",
                "martial_arts",
                "boxing",
                "golf",
                "rock_climbing"
              ],
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Xóa môn thể thao yêu thích thành công"
          }
        },
        "summary": "Xóa 1 môn thể thao khỏi danh sách yêu thích và skillLevels",
        "tags": [
          "User"
        ]
      }
    },
    "/api/v1/file/upload": {
      "post": {
        "operationId": "FileController_uploadFile_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "File upload",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Upload file successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "success": true,
                    "data": {
                      "asset_id": "some-asset-id",
                      "public_id": "some-public-id",
                      "url": "https://res.cloudinary.com/..."
                    },
                    "message": "File uploaded successfully"
                  }
                }
              }
            }
          }
        },
        "summary": "Upload file",
        "tags": [
          "File"
        ]
      }
    },
    "/api/v1/file/upload-multiple": {
      "post": {
        "operationId": "FileController_uploadMultipleFiles_v1",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Multiple file upload",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Upload multiple files successfully",
            "content": {
              "application/json": {
                "schema": {
                  "example": {
                    "success": true,
                    "data": [
                      {
                        "asset_id": "some-asset-id",
                        "public_id": "some-public-id",
                        "url": "https://res.cloudinary.com/..."
                      }
                    ],
                    "message": "Files uploaded successfully"
                  }
                }
              }
            }
          }
        },
        "summary": "Upload multiple files",
        "tags": [
          "File"
        ]
      }
    },
    "/api/v1/email/send-otp": {
      "post": {
        "description": "Gửi mã OTP đến email người dùng",
        "operationId": "EmailController_sendOTP_v1",
        "parameters": [
          {
            "name": "accept-language",
            "in": "header",
            "description": "Ngôn ngữ (en hoặc vi) - Có thể dùng header này hoặc query parameter ?lang=en",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "to": {
                    "type": "string",
                    "example": "user@example.com",
                    "description": "Email nhận OTP"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP đã được gửi thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseEmailDto"
                }
              }
            }
          }
        },
        "summary": "Send OTP",
        "tags": [
          "Email"
        ]
      }
    },
    "/api/v1/email/verify-otp": {
      "post": {
        "description": "Xác thực OTP",
        "operationId": "EmailController_verifyOtp_v1",
        "parameters": [
          {
            "name": "accept-language",
            "in": "header",
            "description": "Ngôn ngữ (en hoặc vi) - Có thể dùng header này hoặc query parameter ?lang=en",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "email": {
                    "type": "string",
                    "example": "user@example.com",
                    "description": "Email nhận OTP"
                  },
                  "otp": {
                    "type": "string",
                    "example": "123456",
                    "description": "OTP"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP đã được xác thực thành công",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResponseEmailDto"
                }
              }
            }
          }
        },
        "summary": "Verify OTP",
        "tags": [
          "Email"
        ]
      }
    }
  },
  "info": {
    "title": "API Documentation",
    "description": "Swagger docs for the project",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "bearer": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http"
      }
    },
    "schemas": {
      "LoginDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email của người dùng"
          },
          "password": {
            "type": "string",
            "description": "Mật khẩu của người dùng"
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "ResponseAuthDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "Access token trả về sau khi đăng nhập hoặc refresh"
          },
          "refreshToken": {
            "type": "string",
            "description": "Refresh token đi kèm với access token"
          }
        }
      },
      "LocationDto": {
        "type": "object",
        "properties": {
          "city": {
            "type": "string",
            "example": "Hanoi"
          },
          "district": {
            "type": "string",
            "example": "Cau Giay"
          },
          "address": {
            "type": "string",
            "example": "123 Main St"
          }
        }
      },
      "RegisterDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Email của người dùng",
            "example": "johndoe@example.com"
          },
          "password": {
            "type": "string",
            "description": "Mật khẩu mạnh (tối thiểu 8 ký tự, 1 số, 1 chữ in hoa, 1 ký tự đặc biệt)",
            "example": "StrongP@ssw0rd"
          },
          "refToken": {
            "type": "string",
            "description": "Refresh Token",
            "example": "..."
          },
          "firstName": {
            "type": "string",
            "description": "Tên",
            "example": "John"
          },
          "lastName": {
            "type": "string",
            "description": "Họ",
            "example": "Doe"
          },
          "avatar": {
            "type": "string",
            "description": "Avatar URL",
            "example": "https://..."
          },
          "coverImage": {
            "type": "string",
            "description": "Cover Image URL",
            "example": "https://..."
          },
          "bio": {
            "type": "string",
            "description": "Bio",
            "example": "I love sports!"
          },
          "dateOfBirth": {
            "format": "date-time",
            "type": "string",
            "description": "Ngày sinh",
            "example": "2000-01-01"
          },
          "phone": {
            "type": "string",
            "description": "Số điện thoại",
            "example": "+84987654321"
          },
          "location": {
            "description": "Địa chỉ",
            "allOf": [
              {
                "$ref": "#/components/schemas/LocationDto"
              }
            ]
          },
          "favoritesSports": {
            "type": "array",
            "description": "Danh sách môn thể thao yêu thích",
            "items": {
              "type": "string",
              "enum": [
                "football",
                "basketball",
                "tennis",
                "badminton",
                "volleyball",
                "table_tennis",
                "swimming",
                "running",
                "cycling",
                "yoga",
                "gym",
                "martial_arts",
                "boxing",
                "golf",
                "rock_climbing"
              ]
            }
          },
          "skillLevels": {
            "type": "object",
            "description": "Trình độ kỹ năng theo môn thể thao",
            "example": {
              "football": "beginner",
              "tennis": "advanced"
            },
            "additionalProperties": {
              "type": "string",
              "enum": [
                "beginner",
                "intermediate",
                "advanced",
                "professional"
              ]
            }
          },
          "friends": {
            "description": "Danh sách bạn bè",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "following": {
            "description": "Danh sách đang theo dõi",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "followers": {
            "description": "Danh sách người theo dõi",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "joinedGroups": {
            "description": "Danh sách nhóm đã tham gia",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái hoạt động",
            "example": true
          },
          "isVerified": {
            "type": "boolean",
            "description": "Đã xác thực email",
            "example": false
          },
          "roles": {
            "type": "array",
            "description": "Danh sách role (ADMIN, MODERATOR, USER)",
            "items": {
              "type": "string",
              "enum": [
                "user",
                "admin",
                "moderator"
              ]
            }
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "Map": {
        "type": "object",
        "properties": {}
      },
      "ResponseProfileDto": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "ID của người dùng"
          },
          "email": {
            "type": "string",
            "description": "Email của người dùng"
          },
          "firstName": {
            "type": "string",
            "description": "Tên"
          },
          "lastName": {
            "type": "string",
            "description": "Họ"
          },
          "fullName": {
            "type": "string",
            "description": "Tên đầy đủ"
          },
          "avatar": {
            "type": "string",
            "description": "Ảnh đại diện"
          },
          "coverImage": {
            "type": "string",
            "description": "Ảnh bìa"
          },
          "bio": {
            "type": "string",
            "description": "Tiểu sử"
          },
          "dateOfBirth": {
            "format": "date-time",
            "type": "string",
            "description": "Ngày sinh"
          },
          "phone": {
            "type": "string",
            "description": "Số điện thoại"
          },
          "location": {
            "type": "object",
            "description": "Địa chỉ"
          },
          "favoritesSports": {
            "description": "Các môn thể thao yêu thích",
            "type": "array",
            "items": {
              "type": "array"
            }
          },
          "skillLevels": {
            "description": "Mức độ kỹ năng",
            "allOf": [
              {
                "$ref": "#/components/schemas/Map"
              }
            ]
          },
          "friendsCount": {
            "type": "number",
            "description": "Số lượng bạn bè"
          },
          "followingCount": {
            "type": "number",
            "description": "Số lượng đang theo dõi"
          },
          "followersCount": {
            "type": "number",
            "description": "Số lượng người theo dõi"
          },
          "joinedGroupsCount": {
            "type": "number",
            "description": "Số lượng nhóm đã tham gia"
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái hoạt động"
          },
          "isVerified": {
            "type": "boolean",
            "description": "Trạng thái xác thực"
          },
          "roles": {
            "description": "Vai trò",
            "type": "array",
            "items": {
              "type": "array"
            }
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Ngày tạo"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Ngày cập nhật"
          }
        },
        "required": [
          "_id",
          "email",
          "firstName",
          "lastName",
          "fullName",
          "friendsCount",
          "followingCount",
          "followersCount",
          "joinedGroupsCount",
          "isActive",
          "isVerified",
          "roles",
          "createdAt",
          "updatedAt"
        ]
      },
      "UpdateProfileDto": {
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "description": "Tên"
          },
          "lastName": {
            "type": "string",
            "description": "Họ"
          },
          "avatar": {
            "type": "string",
            "description": "Ảnh đại diện"
          },
          "coverImage": {
            "type": "string",
            "description": "Ảnh bìa"
          },
          "bio": {
            "type": "string",
            "description": "Tiểu sử"
          },
          "dateOfBirth": {
            "format": "date-time",
            "type": "string",
            "description": "Ngày sinh"
          },
          "phone": {
            "type": "string",
            "description": "Số điện thoại"
          },
          "location": {
            "description": "Địa chỉ",
            "allOf": [
              {
                "$ref": "#/components/schemas/LocationDto"
              }
            ]
          },
          "favoritesSports": {
            "description": "Các môn thể thao yêu thích",
            "type": "array",
            "items": {
              "type": "array"
            }
          },
          "skillLevels": {
            "description": "Mức độ kỹ năng",
            "allOf": [
              {
                "$ref": "#/components/schemas/Map"
              }
            ]
          }
        }
      },
      "ResponseEmailDto": {
        "type": "object",
        "properties": {
          "messageId": {
            "type": "string",
            "description": "ID của email đã gửi",
            "example": "abc123"
          },
          "accepted": {
            "description": "Danh sách email gửi thành công",
            "example": [
              "user@example.com"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "rejected": {
            "description": "Danh sách email gửi thất bại",
            "example": [],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "otp": {
            "type": "string",
            "description": "Mã OTP",
            "example": "123456"
          },
          "otpExpired": {
            "format": "date-time",
            "type": "string",
            "description": "Thời hạn OTP (UTC)",
            "example": "2021-01-01T00:00:00.000Z"
          },
          "timezone": {
            "type": "string",
            "description": "Múi giờ được sử dụng (UTC cho en, GMT+7 cho vi)",
            "example": "UTC",
            "enum": [
              "UTC",
              "GMT+7"
            ]
          },
          "formattedExpiredTime": {
            "type": "string",
            "description": "Thời gian hết hạn được format theo ngôn ngữ và múi giờ địa phương",
            "example": "01/01/2021, 12:00:00 AM",
            "examples": {
              "en": "01/01/2021, 12:00:00 AM",
              "vi": "01/01/2021, 07:00:00"
            }
          }
        },
        "required": [
          "messageId",
          "accepted",
          "rejected"
        ]
      }
    }
  }
}